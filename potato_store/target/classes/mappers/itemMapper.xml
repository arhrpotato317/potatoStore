<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="item">
	
	<!-- 전체 상품 리스트(계층쿼리) -->
	<select id="getAllItemList" resultType="hashmap">
		SELECT CDLVL, CDNAME, CDNO, UPCD, DECODE(USEYN, 'Y', 'checked') USEYN
		FROM EXAM_MANAGER.CODEMNG
		START WITH CDNO = 'C0000'
		CONNECT BY PRIOR CDNO = UPCD
	</select>
	
	<!-- 카테고리 리스트 -->
	<select id="getCateOneList" parameterType="String" resultType="hashmap">
		SELECT CDNO, CDNAME
		FROM EXAM_MANAGER.CODEMNG
		WHERE UPCD = #{upCode}
	</select>
	
	<!-- 카테고리 조회 리스트 -->
	<select id="getCateList" parameterType="String" resultType="hashmap">
		SELECT 
			ITEMCD
			, ITEMNAME
			, MADENMCD
			, (SELECT CDNAME FROM EXAM_MANAGER.CODEMNG CMG WHERE ITEM.MADENMCD = CMG.CDNO) AS MADENMNAME
			, ITEMUNITCD
			, (SELECT CDNAME FROM EXAM_MANAGER.CODEMNG CMG WHERE ITEM.ITEMUNITCD = CMG.CDNO) AS ITEMUNITNAME
			, STOCKAMT
			, DECODE(STOCKYN, 'Y', 'checked') STOCKYN
			, DECODE(USEYN, 'Y', 'checked') USEYN
			, ITEMCLSCD
		FROM EXAM_MANAGER.ITEMLIST ITEM
		WHERE ITEMCLSCD = #{cateTwo}
	</select>
	
</mapper>